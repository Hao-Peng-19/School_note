# 8086的指令系统

## 数据传送类指令
```
-  传送指令  MOV dest(目的), src(源地址)  // dest <- src 目的操作数不可以是立即数(注意区分字传送和字节传送)
- 交换指令 XCHL reg, reg/mem
- 换码指令 xlat 
- 进栈指令 push 进栈指令先让堆栈指针SP - 2，然后把一个操作数放入堆栈顶端，操作数只能是字，低存低，高存高
- 出栈指令 pop 出栈指令是先让栈顶的一个字传送至操作数，然后堆栈指针再 + 2。
	1. 8086处理器的堆栈使用SS段寄存器指向段基地址，堆栈段的范围有指针Sp所确定。
- 标志寄存器传送
	1. LAHF 将Flags的低字节送寄存器AH
	2. SAHF 将AH寄存器内容送FLAGS的低字节
		（以上两个指令只影响标志寄存器的低八位）
	3. PUSHF 将标志寄存器的内容压入堆栈，并且SP - 2
	4. POPF  将栈顶字单元送入标志寄存器，并且SP + 2
- 标志位操作
- 有效地址传送指令 lea 
- 指针传送指令 lds les

```

## 算术运算类指令
- 状态标志：
	1. 进位标志CF：有进位或者借位，则标志变为1，否则为0。用于反应无符号数加减运算结果是否超出范围。
	2. 溢出标志OF：表示有符号整数加减之后是否超出范围，如果超出则表示溢出，将OF置为1，否则为0，所以有符号数在运算时，只有没有溢出的情况才是正确的。
	3. 零标志ZF：反应运算结果是否为0，如果为0，则ZF = 1，否则，ZF = 0.
	4. 符号标志SF：反应运算结果是正数还是复数运算结果的最高位如果为1，则SF = 1.
	5. 奇偶标志PF。反应运算结果中”1“的个数，如果为偶数，则PF = 1.注：PF只负责反应最低八位中的奇偶个数。
- 加法指令
```
 - ADD des, src 将源操作数与目的操作数相加，结果存入原操作数中。
 - ADC des，src 带进位的加法指令
 - INC 对操作数+1
```
- 减法指令
```
- SUB des, src 将目的操作数减去源操作数并且存入目的操作数，即des <- des-src
- SBB 带借位的减法指令
- DEC 对操作数 -1
- NEG 求不指令， 0 - 操作数（按位取反后+1）
- CMP 比较指令 将目的操作数减去源操作数（与SUB不同的是，CMP指令不会返回目的操作数，只是影响标志位）
```
* 乘法指令
```
- mul r8/m8 乘法指令隐含的一个操作数在AX就或者DX
- imul 有符号数乘法
```
* 除法指令
```
- div 无符号数除法
- idiv 有符号数除法
```
- 符号扩展指令
```
CBW: al符号扩展到ax
CWD: ax符号扩展到dx和ax
```
	- 无符号数扩展只要在前面＋0
	- 有符号数扩展正数在前面 +0，负数就+F
十进制数调整指令

## 位操作指令
- AND 逻辑与，两位都是1才是1，否则均为0. and指令可以用于复位，将需要置0的位与0相与，保持不变的与1相与即可
- OR 逻辑或，只要有一个1就是1，否则为0
- XOR 异或，两位不相同时为1，否则结果为0.要求反的同1异或，维持不变的同0异或。
- NOT 逻辑非 全部求反。
- 移位指令：
	1. 逻辑移位shl（逻辑左移，相当于*2）shr（逻辑右移）
	2. 算术移位sal（算术左移等于逻辑左移）sar（算术右移）
	3. 循环移位rol（不带进位的循环左移）ror（不带进位的循环右移）rcl（带进位的循环左移）rcr（带进位的循环右移）
	4. 以上移位指令如果仅仅只移动1位，则用1表示，否则需要用CL表示寄存器移位次数
## 条件转移类指令
- 程序的执行序列由段寄存器CS和指令指针IP构成
- 指令寻址：
	1. 顺序寻址，指令指针寄存器自增，下一条指令紧挨着当前指令
	2. 跳转寻址（主要）：相对寻址，直接寻址，间接寻址
- 无条件转移指令：无任何先决条件就能改变执行顺序，能使程序从目标地址处开始执行，JMP可以跳转到1MB中的任何位置，根据距离分为段内转移和段间转移。
	 1. 段内转移，如果可以用一个8位表示，则是近转移，16位则为远转移。
	 2. 段间转移，是指从当前代码段跳转到另一个代码段，CS和IP都要变化，也可以称为远转移
	 3. JMP指令格式	 ```
```
- 段内转移，相对寻址 jmp label
- 段内转移，间接寻址 jmp r16/m16
- 段间转移，直接寻址 jmp far ptr label
```
- 条件转移指令JCC
	1. jcc label  如果满足条件，则发生转移，ip=ip+8；否则顺序执行ip=ip+2
	2. jcc中的cc表示判断的条件，一共分为三种（利用标志位但不改变标志位）：判断单个标志位，用于比较无符号数高低，用于比较有符号数大小
- 循环指令
```
jcxz label                  //cx=0,则转移，否则顺序执行
loop label                  //首先将cx-1，然后判断是否为0，不为0则继续执行循环体中的循环
loopz/loope label
loopnz/loopne label
```
- 子程序指令
	1. 子程序指令通常是与主程序分开的，完成一段特定功能的程序。
	2. CALL用于主程序中实现子程序的调用（类似于函数）
	3. 分为段内调用和段间调用
	4. CALL指令不仅仅要与JMP指令一样改变CS：IP实现转移，还要保留下一条指令地址，以便返回时重新获取。
- 中断指令
